<%= render "shared/sidebar" %>

<main class="main-content">
  <h1>Dashboard</h1>
  <p>Welcome, <%= current_user.display_name %>!</p>
  <br />
  <div class="card-grid">
  <% @users_entries.each do |entry| %>
    <%= card do %>
      <%= card_header do %>
        <%= card_title entry.ysws || "Project" %>
      <% end %>
      <%= card_body do %>
        <p class="card-description"><%= truncate(entry.description, length: 150) %></p>
        <div class="card-meta">
          <% if entry.hours_spent.present? %>
            <span class="meta-item">‚è±Ô∏è <%= entry.hours_spent %> hrs</span>
          <% end %>
          <% if entry.country.present? %>
            <span class="meta-item">üìç <%= entry.country %></span>
          <% end %>
          <% if entry.approved_at.present? %>
            <span class="meta-item status-approved">‚úÖ Approved</span>
          <% else %>
            <span class="meta-item status-pending">‚è≥ Pending</span>
          <% end %>
        </div>
      <% end %>
      <%= card_footer do %>
        <div class="card-actions">
          <% if (demo = safe_external_url(entry.demo_url)) %>
            <%= link_to "üåê Demo", demo, class: "btn btn-primary", target: "_blank", rel: "noopener noreferrer" %>
          <% end %>
          <% if (code = safe_external_url(entry.code_url)) %>
            <%= link_to "üíª Code", code, class: "btn btn-secondary", target: "_blank", rel: "noopener noreferrer" %>
          <% end %>
          <% if entry.viral? %>
            <%= link_to "üìà Virality Stats", fetch_virality_path(entry), class: "btn btn-accent", target: "_blank" %>
          <% end %>
          <% if entry.github_stars.present? %>
            <span class="meta-item">‚≠ê <%= entry.github_stars %> stars</span>
          <% end %>
        </div>
      <% end %>
    <% end %>
  <% end %>
  </div>
</main>
